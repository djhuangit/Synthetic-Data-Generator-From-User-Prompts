# Data Models

## DatasetRequest

**Purpose:** Represents the incoming user request for synthetic data generation, capturing the natural language description and optional parameters.

**Key Attributes:**
- description: str - Natural language description of the desired dataset (required)
- rows: int - Number of data rows to generate (optional, defaults to 1000)
- format: str - Output format (defaults to "csv", future-proofing for other formats)

**Relationships:**
- One-to-one with GeneratedSchema (via description hash)
- One-to-one with DatasetResponse (request/response pair)

## GeneratedSchema

**Purpose:** Represents the JSON schema generated by GPT-4o-mini, mapping field names to Faker methods for data generation.

**Key Attributes:**
- description_hash: str - SHA-256 hash of the original description (cache key)
- schema: dict - JSON object mapping field names to Faker method specifications
- created_at: datetime - Timestamp for cache management
- domain: str - Inferred domain category (e-commerce, healthcare, etc.)

**Relationships:**
- Many-to-one with DatasetRequest (multiple requests can share same schema)
- One-to-one with SyntheticDataset (schema drives data generation)

## SyntheticDataset

**Purpose:** Represents the generated synthetic data before CSV conversion, containing the actual data records.

**Key Attributes:**
- data: List[Dict] - Array of generated data records
- row_count: int - Actual number of rows generated
- field_names: List[str] - Column headers extracted from schema
- generation_time: float - Time taken to generate data (performance tracking)

**Relationships:**
- One-to-one with GeneratedSchema (schema defines structure)
- One-to-one with DatasetResponse (data becomes CSV output)

## DatasetResponse

**Purpose:** Represents the final API response containing the CSV data and metadata.

**Key Attributes:**
- csv_content: str - Generated CSV data as string
- filename: str - Suggested filename based on description
- row_count: int - Number of rows in the dataset
- content_type: str - MIME type for HTTP response headers

**Relationships:**
- One-to-one with DatasetRequest (response to request)
- One-to-one with SyntheticDataset (CSV representation of data)

## ErrorResponse

**Purpose:** Standardized error response format for API failures and validation issues.

**Key Attributes:**
- error_type: str - Category of error (validation, generation, api_failure)
- message: str - Human-readable error description
- details: dict - Additional error context for debugging
- timestamp: datetime - When the error occurred

**Relationships:**
- Standalone model (no direct relationships to other entities)
